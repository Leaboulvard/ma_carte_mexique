/* =========================
   0) VARIABLES + BASE
========================= */
:root{
  --paper:#f4efe5;
  --ink:#2b2b2b;
  --muted:#6e6a61;

  --shadow: 0 26px 70px rgba(0,0,0,.22);
  --shadowSoft: 0 16px 40px rgba(0,0,0,.16);
  --radius: 18px;
}

body{
  margin:0;
  color:var(--ink);
  background: var(--paper);
  font-family: "Inter", system-ui, -apple-system, Segoe UI, Roboto, Arial;
}

/* texture papier */
.page{
  min-height:100vh;
  background:
    radial-gradient(1200px 700px at 50% 0%, rgba(255,255,255,.65), transparent 60%),
    radial-gradient(18px 18px at 10% 18%, rgba(120,80,40,.16), transparent 62%),
    radial-gradient(28px 28px at 22% 12%, rgba(120,80,40,.10), transparent 65%),
    radial-gradient(22px 22px at 82% 18%, rgba(120,80,40,.10), transparent 65%),
    radial-gradient(900px 500px at 70% 20%, rgba(0,0,0,.05), transparent 62%),
    linear-gradient(0deg, rgba(0,0,0,.02), rgba(0,0,0,.02));
}

/* =========================
   1) HEADER
========================= */
.top{
  text-align:center;
  padding: 22px 16px 12px;
}

.top-line{
  display:flex;
  justify-content:center;
  align-items:center;
  gap: 12px;
  color: var(--muted);
  font-size: 13px;
  margin-bottom: 10px;
  font-family: "Special Elite", ui-monospace, monospace;
}

.top h1{
  margin:0;
  font-family: "Playfair Display", serif;
  font-size: 44px;
  letter-spacing: .2px;
  text-shadow: 0 2px 0 rgba(255,255,255,.65);
}

.stamp-emoji{
  font-size: 18px;
  margin-left: 6px;
  opacity: .9;
}

/* =========================
   2) CARTE
========================= */
#map{
  height: 610px;
  width: min(1180px, 94vw);
  margin: 12px auto 0;
  border-radius: var(--radius);
  border: 2px solid rgba(40,40,40,.65);
  outline: 7px solid rgba(255,255,255,.30);
  box-shadow: var(--shadow);
  overflow:hidden;
}

/* Marqueurs ronds photo */
.custom-marker{
  border-radius: 50%;
  overflow: hidden;
  box-shadow: 0 0 0 3px rgba(255,255,255,.92), 0 14px 26px rgba(0,0,0,.20);
  border: 2px solid rgba(0,0,0,.25);
}

/* =========================
   3) CARTE POSTALE (overlay Leaflet)
========================= */
.leaflet-control.story-control,
.story-card,
.story-card *{
  pointer-events: auto;
}

.story-card{
  width: 340px;
  background: rgba(255,255,255,.88);
  border: 1px solid rgba(0,0,0,0.10);
  border-radius: 18px;
  box-shadow: var(--shadowSoft);
  padding: 16px 16px 14px;
  backdrop-filter: blur(3px);
  position: relative;
}

/* Scotch */
.story-card::before{
  content:"";
  position:absolute;
  top:-14px;
  left: 54%;
  transform: translateX(-50%) rotate(-4deg);
  width: 140px;
  height: 30px;
  background: rgba(240, 220, 170, .88);
  border: 1px dashed rgba(0,0,0,.14);
  border-radius: 7px;
  box-shadow: 0 14px 22px rgba(0,0,0,.16);
}

/* Tampon rond */
.story-card::after{
  content:"MEXICO";
  position:absolute;
  right: 16px;
  bottom: 14px;
  width: 78px;
  height: 78px;
  display:grid;
  place-items:center;
  border-radius: 999px;
  font-family: "Special Elite", ui-monospace, monospace;
  font-size: 12px;
  letter-spacing: 2px;
  color: rgba(160,40,40,.40);
  border: 2px dashed rgba(160,40,40,.35);
  transform: rotate(12deg);
  opacity:.95;
}

/* Polaroid */
.story-card .polaroid{
  background:#fff;
  padding: 12px 12px 20px;
  border-radius: 14px;
  box-shadow: 0 12px 26px rgba(0,0,0,.16);
  transform: rotate(-1.2deg);
}

.story-card img{
  width:100%;
  height: 175px;
  object-fit: cover;
  border-radius: 10px;
  display:block;
}

.story-card h2{
  margin: 14px 0 6px;
  text-align:center;
  font-family: "Playfair Display", serif;
  font-size: 22px;
}

.story-card .meta{
  text-align:center;
  color: var(--muted);
  font-size: 12px;
  font-family: "Special Elite", ui-monospace, monospace;
  margin-bottom: 10px;
}

.story-card .desc{
  margin: 0;
  text-align:center;
  font-family: "Special Elite", ui-monospace, monospace;
  font-size: 12.5px;
  line-height: 1.35;
  color: #3a3732;
}

/* =========================
   4) TIMELINE
========================= */
#timeline-wrap{
  width: min(1180px, 94vw);
  margin: 28px auto 8px;
  padding-top: 28px; /* place pour les labels */
}

#timeline{
  position: relative;
  height: 10px;
  background: rgba(0,0,0,.10);
  border-radius: 999px;
  overflow: visible; /* pour afficher les labels au-dessus */
}

.timeline-highlight{
  position:absolute;
  top:0;
  left:0;
  height:10px;
  width:0;
  background: rgba(0,0,0,.12);
  border-radius: 999px;
  pointer-events:none;
  transition: left 180ms ease, width 180ms ease;
}

.timeline-tick{
  position: absolute;
  top: -8px;
  width: 2px;
  height: 26px;
  background: rgba(0,0,0,.45);
  cursor: pointer;
}

.timeline-label{
  position: absolute;
  top: -30px;
  transform: translateX(-50%);
  font-size: 12px;
  color: rgba(0,0,0,.70);
  white-space: nowrap;
  cursor: pointer;
  user-select: none;
  font-family: "Special Elite", ui-monospace, monospace;
}

.timeline-dot{
  position: absolute;
  top: 50%;
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background: rgba(0,0,0,.88);
  transform: translate(-50%, -50%);
  pointer-events:none;
  box-shadow: 0 0 0 3px rgba(255,255,255,.9);
}

/* =========================
   5) CONTROLS (boutons, UI)
========================= */

.controls{
  display:flex;
  justify-content:center;
}

#show-all{
  display:block;
  margin: 8px auto 26px;
  padding: 10px 16px;
  border-radius: 12px;
  border: 2px solid rgba(40,40,40,.55);
  background: rgba(255,255,255,.70);
  cursor:pointer;
  font-family: "Special Elite", ui-monospace, monospace;
  box-shadow: 0 12px 22px rgba(0,0,0,.12);
}

#show-all:hover{ transform: translateY(-1px); }
#show-all:active{ transform: translateY(0px); }

/* =========================
   6) RESPONSIVE
========================= */
@media (max-width: 900px){
  #map{ height: 560px; }
  .story-card{ width: 300px; }
}
